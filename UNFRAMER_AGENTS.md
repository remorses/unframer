# Unframer-specific Guidelines

## CRITICAL: Never edit framer.js manually

**NEVER edit `unframer/src/framer.js` directly!** This file is auto-generated by `scripts/download.ts`.

If you need to fix issues in framer.js:
1. Add string replacements to `fixFramerCode()` in `scripts/download.ts`
2. Run the download script with `download-framer:doppler` from root
3. The script will regenerate framer.js with your fixes applied

Example fix in download.ts:
```ts
codeAfter = codeAfter.replace(
    /const promise = import\(url\)\.then/g,
    'const promise = import(/* webpackIgnore: true */ /* @vite-ignore */ url).then',
)
```

## CRITICAL: Never create node_modules in unframer folder

**NEVER run `pnpm install` inside the unframer submodule folder!**

This submodule is part of the parent workspace at `unframer-private`. Dependencies must be installed from the root only:
```bash
cd /path/to/unframer-private
pnpm install
```

Having a separate `node_modules` in the unframer folder causes React duplication errors like:
- `TypeError: Cannot read properties of null (reading 'useContext')`
- Multiple React instances causing hooks to fail

If you see these errors, delete `unframer/node_modules` and reinstall from root.
